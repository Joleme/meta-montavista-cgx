diff -Naurp rpm-5.4.9_org/build/files.c rpm-5.4.9/build/files.c
--- rpm-5.4.9_org/build/files.c	2014-09-19 15:39:01.231439246 +0530
+++ rpm-5.4.9/build/files.c	2014-09-19 15:41:54.283445985 +0530
@@ -1965,6 +1965,13 @@ static int addFile(FileList fl, const ch
     if (fileGname == NULL)
 	fileGname = getGname(getgid());
     
+    /* Avoid segfault if fileUname and fileGname are NULL */
+    /* Set them to "root", hope "root" is present in every distro */
+    if (fileUname == NULL)
+	fileUname = "root";
+    if (fileGname == NULL)
+	fileGname = fileUname;
+
     /* Add to the file list */
     if (fl->fileListRecsUsed == fl->fileListRecsAlloced) {
 	fl->fileListRecsAlloced += 128;
